 <div class="container-form" >
    <%= simple_form_for prescription,
          html: {
            data: {controller: "form"}
          } do |f| %>

          <div >
            <%= f.input :treatment_id,
                      label: "Type of prescriptions",
                      placeholder: "Select between pills, cares or exercises",
                      # hint: "Select between pills, cares or exercises",
                      as: :radio_buttons,
                      collection_wrapper_tag: 'div',
                      collection_wrapper_class: 'category-wrapper',
                      item_wrapper_class: 'category-item',
                      checked: prescription.treatment&.category&.capitalize, # &: applique que si c'est pas nil (simplifie ternaire)
                      collection: %w[ðŸ’ŠPills â¤ï¸â€ðŸ©¹Cares ðŸš´Exercises],
                      input_html: {
                        class: 'category-selector',
                        style: "filter: drop-shadow(0px 4px 4px #EBEBF2);",
                        data: {action: "click->form#reveal"}
                        },
                      wrapper_html: {
                        class: "text-primary"

                      }
            %>

          <%# /!\ UTILE %>
            <%# Below, pour crÃ©er treatment_id alors que ce n'est pas une colonne de prescription et donc que j'aurais normalement pas pu appeler %>
            <%# dans le Model Prescription, on a crÃ©Ã© un treatment_id comme attr_accessor. Ã§a permet de crÃ©er/FORCER une colonne du simple_form %>

            <%# collection: on peut appeler Treatment car associÃ© Ã  Prescription %>
            <%# value_method: :id // Pas sÃ»r de pourquoi, mais sÃ»rement pour pouvoir appeler traitement qui est connectÃ© Ã  Prescription par l'id %>

            <%# On initialise TOM SELECT, un plug-in JavaScript stylÃ© et trÃ¨s utile qui permet de fairre un autocomplete dans un search + dropdown + plusieurs options customizables %>

            <%= f.input :treatment_id,
                        label: false,
                        as: :select,
                        prompt: "Select your treatment â¬‡ï¸",
                        selected: prescription.treatment.present? ? prescription.treatment.id : nil,
                        input_html: {id: 'treatment-select',
                                    class: "",
                                    data: {controller: 'init-tom-select'}
                                    },
                        wrapper_html: {
                                    class: "d-none",
                                    data: {form_target: 'dropdown'}
                        },
                        collection: Treatment.all.order(:name),
                        value_method: :id
            %>
          </div>

          <%= f.input :start_date,
                    label: "Start date",
                    # hint: "If your treatment spans over multiple days, enter a starting date",
                    as: :date,
                    html5:true,
                    wrapper_html: {
                        class: "text-primary"
                    }, # Change la couleur du label
                    input_html: {
                      class: "card-form",
                      # Change la couleur des inputs + bk-white + filter shadow
                    }
          %>
          <%= f.input :end_date,
                    label: "End date",
                    # hint: "If your treatment spans over multiple days, enter an end date",
                    as: :date,
                    html5:true,
                    wrapper_html: {
                        class: "text-primary"
                    }, # Change la couleur du label
                    input_html: {
                      class: "card-form",
                      # Change la couleur des inputs + bk-white + filter shadow
                    }
          %>
          <div class=" hours-and-minutes">
            <%= f.input :time,
                      label: "Time",
                      required: true,
                      hint: "Select the time",
                      as: :select, # as: :time pour selectionner autant d'heures et minutes qu'on veut!!
                      collection: Prescription::TIMES, #selected: "00:00",
                      wrapper_html: {
                          class: "text-primary"
                      }, # Change la couleur du label
                      input_html: {
                        class: "card-form",
                        # Change la couleur des inputs + bk-white + filter shadow
                      }
            %>
            <%= f.input :day_half,
                      required: true,
                      label: "Morning or afternoon?",
                      placeholder: "Select between pills, cares or exercises",
                      # hint: "Select between pills, cares or exercises",
                      as: :radio_buttons,
                      collection: %w[AM PM],
                      input_html: {
                        class: "card-form",
                        style: "filter: drop-shadow(0px 4px 4px #EBEBF2);"
                      },
                      wrapper_html: {
                        class: "text-primary"
                      }
            %>
          </div>

          <%= f.input :comment,
                    label: "Comment",
                    hint: "Describe any information that would be useful for you when engaging in the treatment (dosage, technics, motivation prompt, ...)",
                    placeholder: "2 x 150mg before each meal or You can do it, John!",
                    as: :text,
                    collection: %w[Pills Cares Exercises],
                    wrapper_html: {
                        class: "text-primary"
                    }, # Change la couleur du label
                    input_html: {
                      class: "card-form",
                      # Change la couleur des inputs + bk-white + filter shadow
                    }
          %>
      <%= f.button :submit, class: "btn-primary mt-3" %>
      </div>
  <% end %>
